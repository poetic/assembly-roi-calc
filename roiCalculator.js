"use strict";function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f=[],g=!0,h=!1;try{for(c=c.call(a);!(g=(d=c.next()).done)&&(f.push(d.value),!(b&&f.length===b));g=!0);}catch(a){h=!0,e=a}finally{try{g||null==c["return"]||c["return"]()}finally{if(h)throw e}}return f}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}var roiCalculator=/*#__PURE__*/function(){function a(b,c,d,e,f){_classCallCheck(this,a);this.options=Object.assign({},{revPerBedPerDay:270,insourcedBillRate:.0065,billingRate:.03,collectionRate:.98},f),this.occupancyRate=85,this.numOfHomes=10,this.bedsPerHome=90,this.insourcedCollectionsRate=.9,this.billingProvider=c,this.billingProviderAbr=d,this.contactLink=e,this.formElement=document.querySelector(b),this.injectForm(),this.emailInput=document.querySelector("".concat(b," .roi-calc-input-wrapper input[type=email]")),this.modal=document.querySelector("".concat(b," .roi-calc-modal-wrapper")),this.modalInsourcedValues=document.querySelectorAll("".concat(b," .roi-calc-modal-results .insourced span")),this.modalOutsourcedValues=document.querySelectorAll("".concat(b," .roi-calc-modal-results .outsourced span")),this.modalDeltaNetCollectionsValue=document.querySelector("".concat(b," .delta-bar span")),this.modalTotalROIValue=document.querySelector("".concat(b," .roi-calc-modal-results .roi span")),this.modalInsourcedBar=document.querySelector("".concat(b," .insourced-bar")),this.modalDeltaBar=document.querySelector("".concat(b," .delta-bar")),this.closeModalButton=document.querySelector("".concat(b," .close-modal")),this.closeModalButton.onclick=this.closeModal.bind(this),this.sendFormToHubspot=this.sendFormToHubspot.bind(this),this.formElement.onsubmit=this.handleSubmit.bind(this)}return _createClass(a,[{key:"injectForm",value:function injectForm(){this.formElement.innerHTML=//once design is finalized this should be changed to the needed HTML
"\n            <form>\n                <h1>Calculate Your Billing ROI with ".concat(this.billingProviderAbr,"</h1>\n                <p>Enter a few facility details to see your potential net collections and ROI.</p>\n                <div class=\"roi-calc-input-wrapper\">\n                    <label for=\"num-of-homes\">Number of Homes</label>\n                    <input name=\"num-of-homes\" type=\"number\" value=\"10\" step=\"1\" min=\"1\" required>\n                </div>\n                <div class=\"roi-calc-input-wrapper\">\n                    <label for=\"avg-bed-per-home\">Average Beds Per Home</label>\n                    <input name=\"avg-bed-per-home\" type=\"number\" value=\"90\" step=\"1\" min=\"1\" required>\n                </div>\n                <div class=\"roi-calc-input-wrapper roi-percentage\">\n                    <label for=\"occupancy-rate\" class=\"info\">Occupancy Rate</label>\n                    <div class=\"tooltip\">Occupancy Rate x Number of Homes = Census</div>\n                    <input name=\"occupancy-rate\" type=\"number\" value=\"85\" min=\"0.01\" max=\"100\" step=\"0.01\" required>\n                </div>\n                <div class=\"roi-calc-input-wrapper roi-percentage\">\n                    <label for=\"collection-rate\" class=\"info\">Collections Rate</label>\n                    <div class=\"tooltip\">The percentage of submitted claims you are able to collect...</div>\n                    <input name=\"collection-rate\" type=\"number\" value=\"90\" min=\"0.01\" max=\"98\" step=\"0.01\" required>\n                </div>\n                <div class=\"roi-calc-input-wrapper\">\n                    <label for=\"user-email\">Email</label>\n                    <input name=\"user-email\" type=\"email\" required>\n                </div>\n                <input type=\"submit\" value=\"Get your results!\" class=\"primary-button-dark\">\n            </form>\n            <div class=\"roi-calc-modal-wrapper\">\n                <div class=\"roi-calc-modal\">\n                    <div class=\"roi-calc-modal-blurb\">\n                        <h1>Your ROI with ").concat(this.billingProviderAbr,"</h1>\n                        <p>\n                            Want to make this return a reality? Contact the <span class='billing-provider'></span>\n                            team to learn how we can maximize your collections, increase your cash flow, and enhance your\n                            overall financial performance.\n                        </p>\n                        <a target=\"blank\" id=\"contact-link\" href=\"").concat(this.contactLink,"\">\n                            <input type=\"submit\" value=\"Contact Us\" class=\"primary-button-dark\">\n                        </a>\n                    </div>\n                    <div class=\"roi-calc-modal-results\">\n                        <div class=\"roi-comparison-results\">\n                            <div class=\"roi-comparison-group\">\n                                <h3>Current Billing</h3>\n                                <ul class=\"insourced\">\n                                    <li>Claims: <span></span></li>\n                                    <li>Gross Collections: <span></span></li>\n                                    <li>- Billing Costs: <span></span></li>\n                                    <hr>\n                                    <li>Net Collections: <span></span></li>\n                                </ul>\n                            </div>\n                            <div class=\"roi-comparison-group roi-emphasis\">\n                                <h3>With ").concat(this.billingProviderAbr,"</h3>\n                                <ul class=\"outsourced\">\n                                    <li>Claims: <span></span></li>\n                                    <li>Gross Collections: <span></span></li>\n                                    <li>- Billing Costs: <span></span></li>\n                                    <hr>\n                                    <li>Net Collections: <span></span></li>\n                                </ul>\n                            </div>\n                        </div>\n                        <div class=\"total-delta\">\n                            <h2>Your ROI With ").concat(this.billingProviderAbr,"</h2>\n\n                            <div class=\"delta-graph\">\n                                <h3>With Current Billing</h3>\n                                <div class=\"insourced-bar\"></div>\n                                <h3 class=\"billing-provider-label\">With ").concat(this.billingProviderAbr,"</h3>\n                                <div class=\"delta-bar\">\n                                    <h3 class=\"delta-net-profit\"><span></span><em class='go-color'>+</em></h3>\n                                </div>\n                            </div>\n                            <!-- <ul class=\"delta\">\n                                <li>Gross Collections: <span></span><em class='go-color'>+ </em></li>\n                                <li>Billing Costs: <span></span><em class='danger-color'>+ </em></li>\n                                <li>Net Collections: <span></span><em class='go-color'>+ </em></li>\n                            </ul> -->\n                            <h2 class=\"roi\"><span></span></h2>\n                        </div>\n                    </div>\n                    <button class=\"close-modal\" title=\"Restart\">&#10006</button>\n                </div>\n            </div>\n            ")}},{key:"abbreviateDollarValue",value:function abbreviateDollarValue(a){return 1e6<=a?"$".concat((a/1e6).toLocaleString(),"M"):1e3<=a?"$".concat((a/1e3).toLocaleString(),"K"):"".concat(a.toLocaleString())}},{key:"handleSubmit",value:function handleSubmit(a){var b=this;a.preventDefault();var c=Object.values(a.target).slice(0,-1).map(function(a){return Number.isNaN(Number.parseFloat(a.value))?a.value:Number.parseFloat(a.value)}),d=_slicedToArray(c,5);this.numOfHomes=d[0],this.bedsPerHome=d[1],this.occupancyRate=d[2],this.insourcedCollectionsRate=d[3],this.email=d[4],this.occupancyRate/=100,this.insourcedCollectionsRate/=100;var e=this.calculateResults(),f=_slicedToArray(e,4),g=f[0],h=f[1],i=f[2],j=f[3],k=g.slice(0,-1),l=_slicedToArray(k,3);this.claims=l[0],this.grossCollectionsCurrent=l[1],this.billingCostsCurrent=l[2];var m=h.slice(1,-1),n=_slicedToArray(m,2);this.grossCollectionsWithProvider=n[0],this.billingCostsWithProvider=n[1],this.sendFormToHubspot(),this.modalInsourcedValues.forEach(function(a,c){a.innerText=b.abbreviateDollarValue(g[c])}),this.modalOutsourcedValues.forEach(function(a,c){a.innerText=b.abbreviateDollarValue(h[c])}),this.modalDeltaNetCollectionsValue.innerText=this.abbreviateDollarValue(i[2]);var o=Math.round(100*((h[3]-g[3])/g[3]));return this.modalDeltaBar.style.width="30%",this.modalDeltaBar.style.width="".concat(30+o,"%"),55<o&&(this.modalInsourcedBar.style.width="5%",this.modalDeltaBar.style.width="".concat(5+o,"%")),85<o&&(this.modalDeltaBar.style.width="85%"),this.modalTotalROIValue.innerHTML="<em>".concat(j/100,"X</em> ROI"),this.modal.style.display="flex",!1}},{key:"closeModal",value:function closeModal(a){return a.preventDefault(),this.modal.style.display="none"}},{key:"calculateResults",value:function calculateResults(){var a=this.numOfHomes*this.bedsPerHome*this.occupancyRate*this.options.revPerBedPerDay,b=function(a){return 1e6<=a?1e6*Math.round(a/1e6):1e3<=a?1e3*Math.round(a/1e3):a},c=[a,a*this.insourcedCollectionsRate,a*this.options.insourcedBillRate,a*this.insourcedCollectionsRate-a*this.options.insourcedBillRate].map(b),d=[a,a*this.options.collectionRate,a*this.options.billingRate,a*this.options.collectionRate-a*this.options.billingRate].map(b),e=[d[1]-c[1],d[2]-c[2],d[3]-c[3]],f=Math.round(100*(e[0]/e[1]));return[c,d,e,f]}},{key:"sendFormToHubspot",value:function sendFormToHubspot(){var a={submittedAt:Date.now(),legalConsentOptions:{consent:{consentToProcess:!0,text:"I agree to allow ".concat(this.billingProvider," to store and process my personal data."),communications:[{value:!0,subscriptionTypeId:999,text:"I agree to receive marketing communications from ".concat(this.billingProvider,".")}]}},fields:[{objectTypeId:"0-1",name:"email",value:this.email},{objectTypeId:"0-1",name:"collections_rate",value:this.insourcedCollectionsRate},{objectTypeId:"0-1",name:"occupancy_rate",value:this.insourcedCollectionsRate},{objectTypeId:"0-1",name:"average_beds_per_home",value:this.bedsPerHome},{objectTypeId:"0-1",name:"number_of_homes",value:this.numOfHomes},{objectTypeId:"0-1",name:"claims",value:this.claims},{objectTypeId:"0-1",name:"gross_collections_current",value:this.grossCollectionsCurrent},{objectTypeId:"0-1",name:"billing_costs_current",value:this.billingCostsCurrent},{objectTypeId:"0-1",name:"gross_collections_with_".concat(this.billingProviderAbr.split(" ").join("_").toLowerCase()),value:this.grossCollectionsWithProvider},{objectTypeId:"0-1",name:"billing_costs_with_".concat(this.billingProviderAbr.split(" ").join("_").toLowerCase()),value:this.billingCostsWithProvider}]};fetch("https://api.hsforms.com/submissions/v3/integration/submit/20893444/6c83b0bd-f3cf-408d-b101-24bb5893f734",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}}]),a}(),myROI=new roiCalculator("#roi-calc","Quality Healthcare Resources","QHCR","https://www.qhcr.com/contact");// const myROI = new roiCalculator('#roi-calc', 'Polaris Group', 'Polaris Group', 'https://www.polaris-group.com/contact');